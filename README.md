# Website Analysis Tools

This project consists of two scripts that help you analyze websites: `capture.js` and `compare.js`. The use case for this project is migration of scripts from one CDN to another for a large volume of sites. *It will produce false positives if the site has dynamically generated pixels and scripts*. 

## Prerequisites

Before using these scripts, you need to have the following software installed on your machine:

1. Node.js: Visit the [official Node.js website](https://nodejs.org/) to download and install the latest version of Node.js. This will also install `npm`, the Node.js package manager.

2. Puppeteer: After installing Node.js, you need to install the Puppeteer package, which is used for website automation and analysis. To install Puppeteer, you can either open your terminal and run the following command or install it as described in the "Usage" section:

```bash
npm install puppeteer
```
With Node.js and Puppeteer installed, you can proceed to use the `capture.js` and `compare.js` scripts as described in the instructions below.

Finally, navigate to the folder where the code is and run `npm install`. This will install the necessary dependencies, including Puppeteer if you didn't install it in the previous step.

## capture.js

This script takes a list of URLs from the `urls.txt` file, captures screenshots, and generates an HTML report for each URL. It also saves the results in a JSON file.

### How to use capture.js

1. Add the URLs you want to analyze to the `urls.txt` file, with one URL per line.
2. Run the following command in your terminal:

```bash
node capture.js
```

The script will create a folder for each URL with the format `domain-{timestamp}`, containing a screenshot of the website and an HTML report. The results of the analysis will also be saved in a JSON file named `report-{timestamp}.json`.

## compare.js
This script takes two JSON result files generated by the capture.js script and compares their content. It checks for differences in cookies and scripts (by URL or by script name) for each URL found in both files. If there are any mismatches, the script will save the details in a new JSON file named `mismatch-results.json`.

### How to use compare.js
1. Ensure you have two JSON result files generated by the capture.js script.
2. Run the following command in your terminal, providing the names of the two JSON files and a boolean value for the `compareScriptNamesOnly` and `compareCookieValuesArg` flags:
   
```bash
node compare.js <file1> <file2> <compareScriptNamesOnly> <compareCookieValuesArg>
```

Replace `<file1>` and `<file2>` with the names of your JSON result files, and replace true with the desired value for the `compareScriptNamesOnly` and `compareCookieValuesArg` flags. Set the `compareScriptNamesOnly` flag to true to compare script names only, and false to compare the full script URLs. Set the `compareCookieValuesArg` flag to true to also compare cookie values.

The script will save any mismatch details in a new JSON file named `mismatch-results.json` as well as `compare-report.html`.
